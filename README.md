# jenkins_terraform_nodejs

I used core devops tools like Terraform, Ansible, Jenkins, Docker, Git&Github and AWS. It was about building the infrastructure by Terraform which contains a vpc and inside it I have 4 subnets, 2 of them are private subnets and the others are public subnets && there are 3 route tables one for the 2 public subnets to route them to the internet gateway which I created on the vpc and the remaining 2 route tables was for my 2 private subnets to route them to the nat gateway and these 2 nat gateways in the public subnets have an elastic ip for each one of them. Also, I have a bastion server in one of the public subnets and it's security group allows the ssh from everywhere (##replace it with your ip). I also have a launch configuration and it's security group which allows the ssh from the private ip of the bastion server and also allows port 3000 from vpc cidr block only and that's for my application servers. I have also an auto scaling group to be able to initiate more servers or even destroy some of the depends on the load but I have 3 static servers no matter what is the load. Also have a load balancer with all of his resources like listener which listens on port 80, target group which foucs on my launch configuration servers on port 3000, policy and it's security group which allow port 80 from everywhere and route them to my app through port 3000. Also have RDS and it was mysql because the application itself which in the private servers was about to connect to the database through the load balancer dns from everywhere but you should give it an environmental variables of my database like the name, port, password, and the endpoint and that's when you run the app. After building my infrastructure I wanted to configure my private servers so that the application can be deployed on them so, I used Ansible to configure my private servers but I needed to use the proxy to run my playbook from the local through the bastion as a proxy server to reach my private servers so, i did some configuration in the ssh and it works. Now I need to build my app by docker and push it to the dockerhub and finally deploy it on my private servers so I used Jenkins pipeline to do it, but I wanted to make my private servers as a slaves for Jenkins to be able to run the pipeline on them not in the master so i needed the proxy command again to make the private servers as a slaves through the bastion server and I sent the remote.jar agent.jar to the private servers by Ansible also installed docker and created a directory for the Jenkins home. I saved the dockerhub credentials on Jenkins server and wrote the Jenkinsfile which to take the code that I pushed to my Github and build the docker file of the nodejs app which says connection to database succeeded or failed depends on if it will connect to the database or not. And then I pushed it to the dockerhub so that I can pull it from my private servers. Finally I tested it from the load balancer dns and it works and said connection succeeded.
